##1、简要描述三次握手四次挥手。  
答：三次握手：
  刚开始客户端处于 closed 的状态，服务端处于 listen 状态。然后
      1、第一次握手：客户端给服务端发一个 SYN 报文，并指明客户端的初始化序列号 ISN（c）。此时客户端处于 SYN_Send 状态。

      2、第二次握手：服务器收到客户端的 SYN 报文之后，会以自己的 SYN 报文作为应答，并且也是指定了自己的初始化序列号 ISN(s)，同时会把客户端的 ISN + 1 作为 ACK 的值，表示自己已经收到了客户端的 SYN，此时服务器处于 SYN_REVD 的状态。

      3、第三次握手：客户端收到 SYN 报文之后，会发送一个 ACK 报文，当然，也是一样把服务器的 ISN + 1 作为 ACK 的值，表示已经收到了服务端的 SYN 报文，此时客户端处于 establised 状态。

      4、服务器收到 ACK 报文之后，也处于 establised 状态，此时，双方以建立起了链接。
   四次挥手：
   刚开始双方都处于 establised 状态，假如是客户端先发起关闭请求，则：

      1、第一次挥手：客户端发送一个 FIN 报文，报文中会指定一个序列号。此时客户端处于FIN_WAIT1状态。

      2、第二次握手：服务端收到 FIN 之后，会发送 ACK 报文，且把客户端的序列号值 + 1 作为 ACK 报文的序列号值，表明已经收到客户端的报文了，此时服务端处于 CLOSE_WAIT状态。

      3、第三次挥手：如果服务端也想断开连接了，和客户端的第一次挥手一样，发给 FIN 报文，且指定一个序列号。此时服务端处于 LAST_ACK 的状态。

      4、第四次挥手：客户端收到 FIN 之后，一样发送一个 ACK 报文作为应答，且把服务端的序列号值 + 1 作为自己 ACK 报文的序列号值，此时客户端处于 TIME_WAIT 状态。需要过一阵子以确保服务端收到自己的 ACK 报文之后才会进入 CLOSED 状态

      5、服务端收到 ACK 报文之后，就处于关闭连接了，处于 CLOSED 状态。

##2、ISN是固定的吗？  
答：三次握手的一个重要功能是客户端和服务端交换ISN(Initial Sequence Number), 以便让对方知道接下来接收数据的时候如何按序列号组装数据。  
如果ISN是固定的，攻击者很容易猜出后续的确认号，因此 ISN 是动态生成的。

##3、什么是半连接队列？  
答：服务器第一次收到客户端的 SYN 之后，就会处于 SYN_RCVD 状态，此时双方还没有完全建立其连接，服务器会把此种状态下请求连接放在一个队列里，我们把这种队列称之为半连接队列。当然还有一个全连接队列，就是已经完成三次握手，建立起连接的就会放在全连接队列中。如果队列满了就有可能会出现丢包现象。


##4、为什么客户端发送 ACK 之后不直接关闭，而是要等一阵子才关闭？  
答：要确保服务器是否已经收到了我们的 ACK 包，如果没有收到的话，服务器会重新发 FIN 包给客户端，客户端再次收到 ACK 包之后，就知道之前的 ACK 报文丢失了，然后再次发送 ACK 报文。

##5、HTTP 1.x版本缺点。  
答：- 在传输数据过程中，所有内容都是明文，客户端和服务器端都无法验证对方的身份，无法保证数据的安全性。  
- HTTP/1.1 版本默认允许复用TCP连接，但是在同一个TCP连接里，所有数据通信是按次序进行的，服务器通常在处理完一个回应后，才会继续去处理下一个，这样子就会造成队头阻塞。  
- http/1.x 版本支持Keep-alive，用此方案来弥补创建多次连接产生的延迟，但是同样会给服务器带来压力，并且的话，对于单文件被不断请求的服务，Keep-alive会极大影响性能，因为它在文件被请求之后还保持了不必要的连接很长时间。

##6、HTTP 2.0特点。  
答：二进制分帧。这是一次彻底的二进制协议，头信息和数据体都是二进制，并且统称为"帧"：头信息帧和数据帧。  
头部压缩。HTTP 1.1版本会出现 「User-Agent、Cookie、Accept、Server、Range」 等字段可能会占用几百甚至几千字节，而 Body 却经常只有几十字节，所以导致头部偏重。HTTP 2.0 使用 HPACK 算法进行压缩。  
多路复用。复用TCP连接，在一个连接里，客户端和浏览器都可以同时发送多个请求或回应，且不用按顺序一一对应，这样子解决了队头阻塞的问题。  
服务器推送。允许服务器未经请求，主动向客户端发送资源，即服务器推送。请求优先级 可以设置数据帧的优先级，让服务端先处理重要资源，优化用户体验。


##7、七层计算机网络结构（OSI）  
答：
物理层：在局部局域网上传送数据桢，它负责管理计算机管理通讯设备和网络媒体之间的互通。包括了针脚、电压、线缆电压、集线器、中继器、网卡、主机接口等。
数据链路层：负责网络寻址、错误侦测和改错。当表头和表尾被加之数据包时会形成桢。数据链表头（DLH）是包含了物理地址和错误侦测和改错的方法。数据链表尾（DLT）是一串指示数据包末端的字符串。例如以太网、无线局域网（Wi-Fi）和通用分组无线服务（GPRS）。
网络层：决定数据的路径选择和转寄，将网络表头（NH）加至数据包，以形成分组。网络表头包含了网络数据，例如：互联网协议（IP）等。
传输层：把传输表头（TH）加至数据以形成数据包。传输表头包含了所使用的协议等发送信息，例如：传输控制协议（TCP）等。
会话层：负责在数据传输中设置和维护计算机网络中两台计算机之间的通讯连接。
表示层：将数据转化为能与接收者的系统格式兼容并适合传输的格式。
应用层：提供为应用软件而设的接口，以设置与另一软件之间的通信。例如：HTTP、HTTPS、FTP、TELNET、POP3、SMTP、SSH等。

OSI 模型是一个标准而非实现，TCP/IP 四层模型由 OSI 7 层模型简化而来，是一个应用的具体实现。


